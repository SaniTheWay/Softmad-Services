@page "/lead/{id:Guid}/visitdetails"
@model Softmad.LeadGeneration.Pages.VisitDetailsModel
@{
    ViewData["Title"] = "Visit Details";
}

<head>
    <link rel="stylesheet" href="~/css/Shubh.css" />
    <script src="~/js/MultiStepForm.js"></script>
</head>


<div class="smd-heading-div">
    <h4>@ViewData["Title"]</h4>
</div>

<div class="form-group text-end p-2 mr-2">
    <a href=@($"/lead/{Model.LeadId}/new-visit")>
        <button type="button" class="btn btn-primary">Add Visit</button>
    </a>
</div>
@foreach (var visit in Model.VisitList)
{
    Guid visitId = visit.VisitId; // Assuming VisitId is a property

    <div class="accordion-item">
        <h2 class="accordion-header" id="flush-heading-@visitId">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse-@visitId" aria-expanded="false" aria-controls="flush-collapse-@visitId">
                <span style="display: flex; justify-content: space-between; width: 100%;">
                    <h6><span class="fw-bold">Visit @(Model.VisitCount++)</span></h6> <span class="text-muted">@visit.VisitDate.Date.ToString().Split(" ")[0]</span>
                </span>
            </button>
        </h2>
        <div id="flush-collapse-@visitId" class="accordion-collapse collapse m-2" aria-labelledby="flush-heading-@visitId" data-bs-parent="#accordionFlushExample">
            <div class="d-flex">
                <span class="fw-bold">Client Feedback:&nbsp;</span>
                <span>@visit.ClientFeedback</span>
            </div>
        </div>
        <div id="flush-collapse-@visitId" class="accordion-collapse collapse m-2" aria-labelledby="flush-heading-@visitId" data-bs-parent="#accordionFlushExample">
            <div class="d-flex">
                <span class="fw-bold">Remarks:&nbsp;</span>
                <span>@visit.Remarks</span>
            </div>
        </div>
    </div>
}
